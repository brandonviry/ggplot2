------------------------------------------------------------------------

---
title: "Projet GGPLOT2"
author: "38001470 VIRY Brandon &  40007818 Chahalane Bériche"
date: '2022-11-21'
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# GUIDE UTILISATION GGPLOT 2

# **SOMMAIRE**

-   Introduction (1)

-   Prerequis (2)

-   Syntax de base

    -   Recuperation de données (2)
    -   Les Géometries et mappage obligatoire (2)
    -   Les mappage optionnelle (2)
    -   Attribut de represnetation (1)
    -   Multigraphe (1)
    -   Faceting (1)
    -   Scales (2)
    -   Theme (1)

-   Exemple :

    -   Exemple 1 (1)

    -   Exemple 2 (2)

-   Aller Plus loin

    -   Resource (1)
    -   Aide (2)

-   Conclusion (1)

**(1) Bériche** **(2) Brandon**

# Introduction

# **Prérequis**

Pour pouvoir utiliser ce guide **il faut maîtriser le langage de programmation R** il faut avoir installé sur sa machine **r studio** installer la librairie  **ggplot2** et savoir **le type de représentation** qu'on veut faire sur vos donner .Si vous avez jamais installer une librairie , utiliser R et Rstudio je vous met en lin un [tutoirel](https://openclassrooms.com/fr/courses/4525256-initiez-vous-au-langage-r-pour-analyser-vos-donnees/6250851-prenez-en-main-r-et-r-studio) expliquant comment utiliser R et Rstudio et je vous expliquer comment installer la librairie ggplot2.

Alors voici comment il faut installer la librairie ggplot2 : 

**Etape 1 : Etape de départ**

[![](installeGGPLOT2/Etape%201%20_%20Etape%20de%20d%C3%A9part.png)](installeGGPLOT2/Etape%201%20_%20Etape%20de%20départ.png)

**Etape 2: Cliquer sur l'onglet "Pakages"**

![](installeGGPLOT2/Etape%202_%20Cliquer%20sur%20l_onglet%20_Pakages_.png)

**Etape 3 : Sous-onglet "Install"**

![](installeGGPLOT2/Etape%203%20_%20Sous-onglet%20_Install_.png)

**Etape 4 : Parametrage**

![](installeGGPLOT2/Etape%204%20_%20Parametrage%20.png)

**Etape 5 : Install from "CRAN"** ![](installeGGPLOT2/Etape%205%20_%20Install%20from%20_CRAN_.png)

**Etape 6 : Entrer le nom de la librairie dans "Package" -\> ggplot2**

![](installeGGPLOT2/Etape%206%20_%20Entrer%20le%20nom%20de%20la%20librairie%20dans%20_Package_%20-_%20ggplot2.png)

**Etape 7 : cocher "install dependencies"**

![](installeGGPLOT2/Etape%207%20_%20cocher%20_install%20dependencies_.png) **Etape 8 : Cliquée sur "install"**

![](installeGGPLOT2/Etape%208%20_%20Cliqu%C3%A9e%20sur%20_install_.png)

**Etape 9 : verifer que le installation est TERMINER et SANS ERREUR *(voir en bleu sur la photo)***

![](installeGGPLOT2/Etape%209%20_%20verifer%20que%20le%20installation%20est%20faite%20voir%20en%20bleu%20sur%20la%20photo.png)

# Syntax de base

## Recuperation de données

Pour récupérer les données la plupart du temps vue le nombre de données , les données sont enregistrés   **dans des fichiers**  et le plus souvent ce fichier est dans le format csv  donc je vais vous montrer comment récupérer les données  dans  plusieurs type de fichier . C'est donner sont d'un type spécial a R **c'est un** **dataframe** où les **données** de chaque colonnes sont **typées**. mais pour simplifier je vais dire tableau et ou les nom des collones sont appeller variable . Qui resemble à ca :

```{r}


#EXMPLE 


donner = data.frame(
   identifant = c(1,2,3),
   animal = c("lapin","chien","chien"),
   couleur = c("Rose","Violer","Magenta")
)

donner
```

**1- simple fichier texte**

```{r}
data <- read.table("data.txt", header = FALSE)
data 
```

```{r}
data <- read.table("data.txt", header = TRUE)
data 
```

data : est la varaible on les données vont etre sauvegader (le tableau)

read.table() :est la fonction qui prend en argument :

1.  le nom du fichier pour l'exemple c'est data.txt sous forme de chaine de chactere c'est adire entre guillmer "data.txt"

2.  Un argument header qui est egale soit a TRUE ou FALSE

    1\. Si vous metter header est egale à TRUE signifit le fichier contient les noms des collonne et des ligne de notre du tableau

    2\. Si vous metter header est egale à FALSE signifit l'inverse

**2- un fichier CSV**

```{r}
 base = read.csv(file = "tic-tac-toe.csv",header = FALSE)
 base
```

read.csv() :est la fonction qui prend en argument cette fonction est réserver au fichier en format .csv:

1.  le nom du fichier pour l'exemple c'est tic-tac-toe.csv sous forme de chaine de chactere c'est adire entre guillmer "tic-tac-toe.csv"

2.  Un argument header qui est egale soit a TRUE ou FALSE

    1.  Si vous metter header est egale à TRUE signifit le fichier contient les noms des collonne et des ligne de notre du tableau

    2.  Si vous metter header est egale à FALSE signifit l'inverse

Il existe plein d'autres façons aussi de récupérer des données comme l'importation  de **fichier excel ,sas ,spss  et plein d'autres** formats ou encore en faisant **une connexion à des bases de données ou package** .

Maintenant que les données sont récupérées pour pouvoir faire la représentation vous devez d'abord importer la librairie que vous avez installé ggplot2 comme suit:

```{r}
library(ggplot2)
```

pouvoir travailler sur c'est donner vous devais prendre c'est donner est le placer en argument de la fonction ggplot comme ceci  :

Données exemple :

```{r}
donnerRp = read.csv(file = "donnerRp.csv",header = TRUE)
donnerRp

```

source des donnees : [( Source )](https://www.offremedia.com/le-temps-consacre-aux-jeux-video-est-estime-7-heures-par-semaine-dans-le-monde-et-en-france-en)

```{r}
ggplot(data= donnerRp)
```

ou

```{r}
ggplot(donnerRp) 
```

comme vous le voyer il juste l'emplacement que vas prendre le graphique qui s'affiche c'est toute a fait normal car on ne lui a pas définit de représentation que on veut afficher .C'est le prochain point de se guide .

## Les Géometries

Les géométries c'est le type de représentation graphique qu' on veut utiliser  il existe beaucoup  de géométrie  chaque géométrie a c'est caractéristique . 

Pour sélectionner la représentation il suffit d' ajouter un type de graphique   qui est sous forme de fonction comme ceci :

```{r}
ggplot(data=donnerRp)   +  geom_point () 
#initialisation donner addition  geom 

```

Comme vous le voyer les géométries ne peut pas être représenter sans un argument .

Les géométriques peuvent avoir en argument ce qu' on appelle un mappage et des atrribue graphique (qui est le prochain point a traités ) . Un mappages permet de relier un élément graphique à une variable d'un tableau.Il existe presque autant de mappage que il y de atrribue graphique. Pour chaque géométrie il existe à un mappage différent . Ce mappage est défini dans la fonction aes() c'est fonction permette de sélectionner les éléments à utiliser pour la représentation selon les caractéristique d'un type de graphique et il y des mappage obligatoire pour faire une represntation et des optionnelle .

Exemple pour une graphique geom_point() avec les ellements de mapage obligatoire :

```{r}
ggplot(data=donnerRp)  + geom_point (aes(x=Heures.moyennes.chaque.semaine , y=Pays )) 
```

-   aes() : Cette fonction permet de crée le mappage sur les données (Les mappages esthétiques)

-   x est un élément du mappage , c'est l'élément du graphique en x

-   y est un élément du mappage ,c'est l'élément du graphique en y 

-   data1 est la donner pris en compte en x

-   data2 est la donner pris en compte en y 

il existe beaucoup de  géométrique  on va vous présenter quelque' un avec les mappage obligatoire

## geom_boxplot : 

```{r}
note =read.csv(file = "note.csv",header = TRUE)
note 
```

```{r}
ggplot(note) + geom_boxplot(aes(x=ECTS , y=Note ))
```

-   x =a variable qualitative  

-   y = variable numérique

## geom_violin

RQ : geom_violin et geom_boxplot sont de facon de visualiser tres proches

```{r}
ggplot(note) + geom_violin(aes(x=ECTS , y=Note))
```

-   x =a variable qualitative  

-   y = variable numérique\

## geom_bar 

```{r}

ggplot(note) + geom_bar(aes(x=Note  ))
```

-   x  ou y = la variable qualitative

-   x si on veut représenter verticalement 

-   y si on veut représenter horizontalement

Vous pouvez aussi passer du format vertical horizontal et vice-versa en ajoutant la fonction coord_flip()   à la géométrie :

```{r}
ggplot(note) + geom_bar(aes(x=Note  ))+coord_flip()

```

RQ : coord_flip() que s'appliquer à toute les type de représentation de ggplot 2 \

## geom_col

```{r}
ggplot(note) + geom_col(aes(x=Note ,y=COUR ))
```

-   x =variable numérique

-   y = le nom ou autre variable numérique

    \

## geom_text

```{r}
ggplot(data=note)  + geom_text (aes(x=Note ,y=COUR, label=ECTS )) 
```

-   x  la position des étiquettes en x

-    y la position des étiquettes en y 

-    label  : le texte a afficher\

## geom_label

```{r}
ggplot(data=note)  + geom_label (aes(x=Note ,y=COUR, label=ECTS )) 
```

-   x  la position des étiquettes en x

-    y la position des étiquettes en y 

-    label  : le texte a afficher\

RQ: geom_text  et geom_label sont identique sauf dans l'affiche du texte 

## geom_density

```{r}
EUR_USD=read.csv(file = "EURUSD.csv",header = TRUE)
EUR_USD 

```

source des donées : [(source)](https://fr.investing.com/currencies/eur-usd-historical-data)

```{r}
colnames(EUR_USD)
```

```{r}
ggplot(EUR_USD)+geom_density(aes(x=Variation))
```

-   x est la variable à observer

## geom_line 

```{r}
ggplot(EUR_USD)+geom_line(aes(x=Variation,y=1:length(rownames(EUR_USD))))
```

-   \
    x : cordonner en x

-   y : cordonner en y

## geom_point

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note))
```

-   x : cordonner en x

-   y : cordonner en y

## geom_hex

```{r}
ggplot(note)+geom_hex(aes(y=ECTS,x=COUR),bins=0.1)
```

-   x : cordonner en x

-   y : cordonner en y

\

## geom_bin2d

```{r}
ggplot(note)+geom_bin2d(aes(y=COUR,x=Note))
```

-   x : cordonner en x

-   y : cordonner en y

RQ : geom_point, geom_hexa ,geom_bin2d fonctionne pareil la seul différence c'est la forme géométrique de la représentation : geom_point c'est un point ,geom_hexa  c'est un hexagone ,geom_bin2d un polygone à 4 côtés 

Il  en existe d'autres mais voici les principales utiliser

<https://bookdown.org/ael/rexplor/chap8.html#geom>

## Les mappage optionnelle

Les mappages optionnelle sont les même que des Attributs de représentation sauf que il agisse selon la variablr que on lui donne.

exemple :

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,size=ECTS)) 
```

size est un mappage optionnelle .

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,color=ECTS)) 
```

color est un mappage optionnelle .

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,color=ECTS ,size=ECTS)) 
```

je vais pas tout vous detailler car tout les mappage optionnelle sont bassé sur les Attribut de représentation qui va vous etre expliquer aprés.

## Attribut de représentation

## Multigraphe

## Faceting

## Scales

Les scale ou échelle permet de déterminer la façon d' un graphique à affiche les données avec les attribues graphique et les mappages .

```{r}
ggplot(data=donnerRp)  + geom_label (aes(x=Heures.moyennes.chaque.semaine , y=Pays ,label=Heures.moyennes.chaque.semaine))
```

```{r}
ggplot(data=donnerRp)  + geom_label (aes(x=Heures.moyennes.chaque.semaine , y=Pays ,label=Heures.moyennes.chaque.semaine))  +  scale_x_continuous(limits = c(0,10)) 

```

## **scale_size**

Alors la première fonction scal que je vais vous présenter permet de modifier la taille  des éléments  a représenté c'est fonction se nomme scale_size ces fonction modifier minimales et maximales  de la taille de l'objet sur un mappage size cette fonction prend en argument un argument range du un vecteur de taille 2 avec le min et le max 

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,size=ECTS)) 
```

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,size=ECTS)) + scale_size(range = c(0, 10))
```

Où le 0 c'est le minimum et le 10 le maximum 

\

## **scale_x.... et scale_y...**

\

Les prochaines fonctions sont les scale qui modifie sur les X et Y 

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note )) 
```

\

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ))  +  scale_x_continuous(limits = c(0,20)) 
```

Les fonctions du genre scale_x.... ou scale_y...  Modifié le l'axe x et y du graphique   cette fonction prend en argument un argument limite qui est un vecteur de taille 2 avec le min et le max . 

Voici quelques fonction : 

-   scale_x\_continuous 

-   scale_y\_continuous

-   scale_x\_log10 

-   scale_y\_log10 

-   scale_x\_discrete 

-   scale_y\_discrete 

\

## **scale_color**

Il existe un autre type de scal qui permet de modifier la couleur ses fonctions sont du genre scale_color ...   Kimmodifier les palettes de couleur  loque on on utilise le attribut graphque  color .

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note )) 
```

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,color=ECTS)) + scale_color_gradient("Taux d'échec", low = "red", high = "green")
```

\

 Voici une liste de fonctions scale_color : \

-   scale_color_gradient qui prend en argument deux paramètre low et high ou low et higt sont une couleur en string ,low falleur la plus faible et high valeurs en plus fort

-   scale_color_viridis_c : ajouter un titre a la legende coleure 

-    scale_fill :  modifier les palettes de couleur  loque on on utilise le attribut graphqUE fill

## Theme

# Exemple :

## Exemple 1

## Exemple 2

```{r}
EUR_USD=read.csv(file = "EURUSD.csv",header = TRUE)

```

```{r}
EUR_USD 
```

source des données : [(source)](https://fr.investing.com/currencies/eur-usd-historical-data)

```{r}
color=read.csv(file = "color.csv",header = TRUE)
name = color$nom
color = data.frame(t(color$HEX))
colnames(color)= name
color

```

```{r}
library(ggplot2)
```

```{r}
ggplot(EUR_USD )+
  geom_point(aes(y=Variation,x=Date ,size =Variation ,color=Variation)) +  scale_size(range=c(0,20))+
  
    geom_hline(yintercept = 5,color=color$`Vert brillant`,size=2,alpha=0.5)+
  geom_hline(yintercept = -5 ,color=color$`Rouge clair brillant`,size=2 ,alpha=0.5) + 
  geom_hline(yintercept = 0,size=2,alpha=0.3)+
  
  geom_text(aes(y=Variation,x=Date ,label=Variation) ,color=color$`Bleu noir`)+
  
  scale_colour_gradient(low = color$`Rouge clair brillant`,high = color$`Vert brillant`)+
  
  scale_y_continuous(limits = c(-10,10))+ 
  

  
  theme_dark()+
  
  theme(axis.text.x = element_text(angle = 90, vjust =1, hjust=1 , color=color$`Blanc crÃ¨me` ,face = "bold")  , plot.background = element_rect(fill =color$`Gris argent`),panel.grid.major = element_line(colour = color$`BlancÂ pur`),axis.title = element_text(family = "Arial" , colour =color$`BlancÂ pur`),
     axis.text.y = element_text(color =color$`Blanc crÃ¨me` , angle = 45 ,size = 12) , plot.title = element_text(color = color$`Jaune brillant`) ,legend.background = element_rect(fill=color$`Gris argent`)
     )+ 
  
  ggtitle("EUR/USD - Euro Dollar américain") + 
  ylab("Varation du taux entre dolard et euro en pourcentage ") +
  xlab("Date des revelevées")



```

# Aller Plus loin

## Resource

## Aide

<https://thinkr.fr/pdf/ggplot2-french-cheatsheet.pdf>

# Conclusion

chien
