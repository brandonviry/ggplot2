------------------------------------------------------------------------

---
title: "Projet GGPLOT2"
author: "38001470 VIRY Brandon &  40007818 Chahalane Bériche"
date: '2022-11-21'
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# GUIDE UTILISATION GGPLOT 2

# **SOMMAIRE**

-   Introduction (1)

-   Prérequis (2)

-   Syntaxe de base

    -   Récupération de données (2)
    -   Les Géométries et mappages obligatoire (2)
    -   Les mappages optionnelle (2)
    -   Attribut de représentation (1)
    -   Multigraphe (1)
    -   Faceting (1)
    -   Scales (2)
    -   Theme (1)

-   Exemple :

    -   Exemple 1 (1)

    -   Exemple 2 (2)

-   Aller Plus loin

    -   Ressource (1)
    -   Aide (2)

-   Conclusion (1)

**(1) Bériche** **(2) Brandon**

# Introduction

# **Prérequis**

Pour pouvoir utiliser ce guide **il faut maîtriser le langage de programmation R** il faut avoir installé sur sa machine **r studio** installer la librairie  **ggplot2** et savoir **le type de représentation** qu'on veut faire sur vos donner .Si vous avez jamais installer une librairie , utiliser R et Rstudio je vous met en lien un [tutoirel](https://openclassrooms.com/fr/courses/4525256-initiez-vous-au-langage-r-pour-analyser-vos-donnees/6250851-prenez-en-main-r-et-r-studio) expliquant comment utiliser R et Rstudio et je vous expliquer comment installer la librairie ggplot2.

Alors, voici comment il faut installer la librairie ggplot2 : 

**Etape 1 : Etape de départ**

[![](installeGGPLOT2/Etape%201%20_%20Etape%20de%20d%C3%A9part.png)](installeGGPLOT2/Etape%201%20_%20Etape%20de%20départ.png)

**Etape 2: Cliquer sur l'onglet "Pakages"**

![](installeGGPLOT2/Etape%202_%20Cliquer%20sur%20l_onglet%20_Pakages_.png)

**Etape 3 : Sous-onglet "Install"**

![](installeGGPLOT2/Etape%203%20_%20Sous-onglet%20_Install_.png)

**Etape 4 : Parametrage**

![](installeGGPLOT2/Etape%204%20_%20Parametrage%20.png)

**Etape 5 : Install from "CRAN"** ![](installeGGPLOT2/Etape%205%20_%20Install%20from%20_CRAN_.png)

**Etape 6 : Entrer le nom de la librairie dans "Package" -\> ggplot2**

![](installeGGPLOT2/Etape%206%20_%20Entrer%20le%20nom%20de%20la%20librairie%20dans%20_Package_%20-_%20ggplot2.png)

**Etape 7 : Cocher "install dependencies"**

![](installeGGPLOT2/Etape%207%20_%20cocher%20_install%20dependencies_.png) **Etape 8 : Cliqué sur "install"**

![](installeGGPLOT2/Etape%208%20_%20Cliqu%C3%A9e%20sur%20_install_.png)

**Etape 9 : Vérifier que le installation est TERMINER et SANS ERREUR *(voir en bleu sur la photo)***

![](installeGGPLOT2/Etape%209%20_%20verifer%20que%20le%20installation%20est%20faite%20voir%20en%20bleu%20sur%20la%20photo.png)

# Syntaxe de base

## Récupération de données

Pour récupérer les données la plupart du temps vue le nombre de données , les données sont enregistrés   **dans des fichiers**  et le plus souvent ce fichier est dans le format csv  donc je vais vous montrer comment récupérer les données  dans  plusieurs type de fichier . C'est données sont d'un type spécial a R **c'est un** **dataframe** où les **données** de chaque colonnes sont **typées**. mais pour simplifier je vais dire tableau et ou les noms des colonnes sont appelé variable . Voici un exemple :

```{r}


#EXEMPLE 


donner = data.frame(
   identifant = c(1,2,3),
   animal = c("lapin","chien","chien"),
   couleur = c("Rose","Violer","Magenta")
)

donner
```

**1- Simple fichier texte**

```{r}
data <- read.table("data.txt", header = FALSE)
data 
```

```{r}
data <- read.table("data.txt", header = TRUE)
data 
```

**data :** est la variable ou les données vont être sauvegarder (le tableau)

**read.table() :**est la fonction qui prend en argument :

1.  **le nom du fichier** pour l'exemple c'est data.txt sous forme de chaîne de caractère c'est adire entre guillemet "data.txt"

2.  Un argument **header** qui est égale soit a **TRUE ou FALSE**

    1\. Si vous mettez header est égale à **TRUE** signifie le fichier **contient les noms des colonne et des ligne de notre du tableau**

    2\. Si vous mettez header est égale à **FALSE** signifie **l'inverse**

**2- Un fichier CSV**

```{r}
 base = read.csv(file = "tic-tac-toe.csv",header = FALSE)
 base
```

**read.csv() :** cette fonction est réserver au fichier en **format .csv** et prend en argument:

1.  **le nom du fichier** pour l'exemple c'est tic-tac-toe.csv sous forme de chaîne de caractère c'est a dire entre guillemet "tic-tac-toe.csv"

2.  Un argument **header** qui est égale soit a **TRUE ou FALSE :**

    1.  Si vous mettez header est égalé à **TRUE** signifie le fichier contient les noms **des colonnes et des ligne** de notre du tableau

    2.  Si vous mettez header est égalé à **FALSE** signifie **l'inverse**

Il existe plein d'autres façons aussi de récupérer des données comme l'importation  de **fichier excel ,sas ,spss  et plein d'autres** formats ou encore en faisant **une connexion à des bases de données ou package** .

Maintenant que les données sont récupérées pour pouvoir faire la représentation vous devez d'abord **importer la librairie** que vous avez installé ggplot2 comme suit:

```{r}
library(ggplot2)
```

pouvoir travailler sur c'est donner vous devez **prendre c'est donner est le placer en argument de la fonction ggplot** comme ceci  :

Données exemple :

```{r}
donnerRp = read.csv(file = "donnerRp.csv",header = TRUE)
donnerRp

```

source des donnees : [( Source )](https://www.offremedia.com/le-temps-consacre-aux-jeux-video-est-estime-7-heures-par-semaine-dans-le-monde-et-en-france-en)

```{r}
ggplot(data= donnerRp)
```

ou

```{r}
ggplot(donnerRp) 
```

comme vous le voyez il y a juste l'emplacement ou le graphique va s'afficher qui s'affiche c'est toute a fait normal car on ne lui a pas définit de représentation.C'est le prochain point de se guide .

## Les Géometries

**Les géométries c'est le type de représentation graphique** qu' on veut utiliser sur nos données  il existe beaucoup  de géométrie  chaque géométrie a c'est caractéristique . 

Pour **sélectionner** la représentation que on veut il suffit **d' ajouter un type de graphique**   qui est sous forme de fonction:

```{r}
ggplot(data=donnerRp)   +  geom_point () 
#initialisation donner addition  geom 

```

Comme vous le voyez **les géométries ne peuvent pas être représenter sans un argument** .

**Les géométriques** peuvent avoir en **argument** ce qu' on appelle un **mappage** et **des attribue graphique** (qui est le prochain point a traités ) . Un **mappages** permet de **relier un élément graphique à une variable** d'un tableau.Il existe presque autant de mappage que il y de attribue graphique. Pour chaque géométrie il existe à un mappage différent . Ce **mappage** est défini dans la fonction **aes**() c'est fonction permette de **sélectionner les éléments à utiliser pour la représentation selon les caractéristiques** d'un type de graphique .Certain des **mappages sont obligatoire** pour faire une représentation et des **autres optionnelle** .

Exemple pour une graphique geom_point() avec les éllements de mappage obligatoire :

```{r}
ggplot(data=donnerRp)  + geom_point (aes(x=Heures.moyennes.chaque.semaine , y=Pays )) 
```

-   **aes() :** Cette fonction permet de crée le mappage sur les données (Les mappages esthétiques)

-   **x** est un élément du mappage , c'est l'élément du graphique en x

-   **y** est un élément du mappage ,c'est l'élément du graphique en y 

-   **data1** est la donner pris en compte en x

-   **data2** est la donner pris en compte en y 

il existe beaucoup de  géométrique  on va vous présenter quelque' un avec les mappage obligatoire

## geom_boxplot : 

```{r}
note =read.csv(file = "note.csv",header = TRUE)
note 
```

```{r}
ggplot(note) + geom_boxplot(aes(x=ECTS , y=Note ))
```

-   **x** =a variable qualitative  

-   **y** = variable numérique

## geom_violin

**RQ** : geom_violin et geom_boxplot sont des façon de visualiser très proches

```{r}
ggplot(note) + geom_violin(aes(x=ECTS , y=Note))
```

-   **x** =a variable qualitative  

-   **y** = variable numérique\

## geom_bar 

```{r}

ggplot(note) + geom_bar(aes(x=Note  ))
```

-   **x**  ou **y** = la variable qualitative

-   **x** si on veut représenter verticalement 

-   **y** si on veut représenter horizontalement

Vous pouvez aussi passer du format vertical horizontal et vice-versa en ajoutant la fonction **coord_flip()**   à la géométrie :

```{r}
ggplot(note) + geom_bar(aes(x=Note  ))+coord_flip()

```

**RQ** : coord_flip() que s'appliquer à toute les type de représentation de ggplot 2 \

## geom_col

```{r}
ggplot(note) + geom_col(aes(x=Note ,y=COUR ))
```

-   **x** =variable numérique

-   **y** = le nom ou autre variable numérique

    \

## geom_text

```{r}
ggplot(data=note)  + geom_text (aes(x=Note ,y=COUR, label=ECTS )) 
```

-   **x**  la position des étiquettes en x

-    **y** la position des étiquettes en y 

-    **label**  : le texte a afficher\

## geom_label

```{r}
ggplot(data=note)  + geom_label (aes(x=Note ,y=COUR, label=ECTS )) 
```

-   **x**  la position des étiquettes en x

-    **y** la position des étiquettes en y 

-    **label**  : le texte a afficher\

**RQ**: geom_text  et geom_label sont identique sauf dans l'affiche du texte 

## geom_density

```{r}
EUR_USD=read.csv(file = "EURUSD.csv",header = TRUE)
EUR_USD 

```

source des donées : [(source)](https://fr.investing.com/currencies/eur-usd-historical-data)

```{r}
colnames(EUR_USD)
```

```{r}
ggplot(EUR_USD)+geom_density(aes(x=Variation))
```

-   **x** est la variable à observer

## geom_line 

```{r}
ggplot(EUR_USD)+geom_line(aes(x=Variation,y=1:length(rownames(EUR_USD))))
```

-   \
    **x** : cordonner en x

-   **y** : cordonner en y

## geom_point

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note))
```

-   **x** : cordonner en x

-   **y** : cordonner en y

## geom_hex

```{r}
ggplot(note)+geom_hex(aes(y=ECTS,x=COUR),bins=0.1)
```

-   **x** : cordonner en x

-   **y** : cordonner en y

\

## geom_bin2d

```{r}
ggplot(note)+geom_bin2d(aes(y=COUR,x=Note))
```

-   **x** : cordonner en x

-   **y** : cordonner en y

**RQ** : geom_point, geom_hexa ,geom_bin2d fonctionne pareil la seul différence c'est la forme géométrique de la représentation : geom_point c'est un point ,geom_hexa  c'est un hexagone ,geom_bin2d un polygone à 4 côtés 

Il  en existe d'autres mais voici les principales utiliser

<https://bookdown.org/ael/rexplor/chap8.html#geom>

## Les mappage optionnelle

Les **mappages** optionnelle sont les **mêmes** que des **Attributs de représentation** sauf que il agisse selon la variable que on lui donne.

exemple :

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,size=ECTS)) 
```

**size** est un mappage optionnelle .

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,color=ECTS)) 
```

**color** est un mappage optionnelle .

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,color=ECTS ,size=ECTS)) 
```

je vais pas tout vous détailler car tout **les** **mappage optionnelle sont basé sur les Attribut de représentation** qui va vous être expliquer après.

## Attribut de représentation

## Multigraphe

## Faceting

## Scales

Les scale ou échelle permet de déterminer la façon dont un graphique affiche les données avec les attribues graphique et les mappages .

```{r}
ggplot(data=donnerRp)  + geom_label (aes(x=Heures.moyennes.chaque.semaine , y=Pays ,label=Heures.moyennes.chaque.semaine))
```

```{r}
ggplot(data=donnerRp)  + geom_label (aes(x=Heures.moyennes.chaque.semaine , y=Pays ,label=Heures.moyennes.chaque.semaine))  +  scale_x_continuous(limits = c(0,10)) 

```

## **scale_size**

La première **fonction** scal que je vais vous présentez permet de **modifier la taille  des éléments  a représenté** c'est fonction se nomme scale_size ces fonction **modifier minimales et maximales  de la taille** de l'objet sur un mappage size cette fonction prend en argument **un argument range du un vecteur de taille 2 avec le min et le max** 

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,size=ECTS)) 
```

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,size=ECTS)) + scale_size(range = c(0, 10))
```

Où le 0 c'est le minimum et le 10 le maximum 

\

## **scale_x.... et scale_y...**

\

Les prochaines fonctions sont les scale qui modifie sur les X et Y 

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note )) 
```

\

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ))  +  scale_x_continuous(limits = c(0,20)) 
```

Les fonctions du genre s**cale_x.... ou scale_y...**  Modifié le **l'axe x et y du graphique**   cette fonction prend en argument **un argument limite** qui est un vecteur de t**aille 2 avec le min et le max .** 

Voici quelques fonction : 

-   scale_x\_continuous 

-   scale_y\_continuous

-   scale_x\_log10 

-   scale_y\_log10 

-   scale_x\_discrete 

-   scale_y\_discrete 

\

## **scale_color**

Il existe un autre type de **scal** qui permet de **modifier la couleur** ses fonctions sont du genre scale_color ...   Kimmodifier **les palettes de couleur**  lorsque on on utilise le attribut graphique  **color** .

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note )) 
```

```{r}
ggplot(note)+geom_point(aes(y=COUR,x=Note ,color=ECTS)) + scale_color_gradient("Taux d'échec", low = "red", high = "green")
```

\

 Voici une liste de fonctions **scale_color** : \

-   **scale_color_gradient** qui prend en argument deux paramètre low et high ou low et higt sont une couleur en string ,low valleur la plus faible et high valeurs en plus fort

-   **scale_color_viridis_c** : ajoute un titre a la legende couleur 

-    **scale_fill** :  modifie les palettes de couleur  loque on on utilise le attribut graphique fill

## Theme

# Exemple :

## Exemple 1

## Exemple 2

```{r}
EUR_USD=read.csv(file = "EURUSD.csv",header = TRUE)

```

```{r}
EUR_USD 
```

source des données : [(source)](https://fr.investing.com/currencies/eur-usd-historical-data)

```{r}
color=read.csv(file = "color.csv",header = TRUE)
name = color$nom
color = data.frame(t(color$HEX))
colnames(color)= name
color

```

```{r}
library(ggplot2)
```

```{r}
ggplot(EUR_USD )+
  geom_point(aes(y=Variation,x=Date ,size =Variation ,color=Variation)) +  scale_size(range=c(0,20))+
  
    geom_hline(yintercept = 5,color=color$`Vert brillant`,size=2,alpha=0.5)+
  geom_hline(yintercept = -5 ,color=color$`Rouge clair brillant`,size=2 ,alpha=0.5) + 
  geom_hline(yintercept = 0,size=2,alpha=0.3)+
  
  geom_text(aes(y=Variation,x=Date ,label=Variation) ,color=color$`Bleu noir`)+
  
  scale_colour_gradient(low = color$`Rouge clair brillant`,high = color$`Vert brillant`)+
  
  scale_y_continuous(limits = c(-10,10))+ 
  

  
  theme_dark()+
  
  theme(axis.text.x = element_text(angle = 90, vjust =1, hjust=1 , color=color$`Blanc crÃ¨me` ,face = "bold")  , plot.background = element_rect(fill =color$`Gris argent`),panel.grid.major = element_line(colour = color$`BlancÂ pur`),axis.title = element_text(family = "Arial" , colour =color$`BlancÂ pur`),
     axis.text.y = element_text(color =color$`Blanc crÃ¨me` , angle = 45 ,size = 12) , plot.title = element_text(color = color$`Jaune brillant`) ,legend.background = element_rect(fill=color$`Gris argent`)
     )+ 
  
  ggtitle("EUR/USD - Euro Dollar américain") + 
  ylab("Varation du taux entre dolard et euro en pourcentage ") +
  xlab("Date des revelevées")



```

# Aller Plus loin

## Resource

## Aide

### Documentation de GGPLOT 2 

![](Aide/1.png)

source :<https://ggplot2.tidyverse.org/>

### Documentation basique 

![](Aide/2.png)

source :<https://juba.github.io/tidyverse/08-ggplot2.html>

#### Aide memoire 

![](Aide/3.png)

source : <https://thinkr.fr/pdf/ggplot2-french-cheatsheet.pdf>

#### Données pour teste 

![](Aide/4.png)

source : <http://archive.ics.uci.edu/ml/datasets.php>

### R et Rstudio 

![](Aide/5.png)

source : <https://openclassrooms.com/fr/courses/4525256-initiez-vous-au-langage-r-pour-analyser-vos-donnees/6250851-prenez-en-main-r-et-r-studio>

### forum 

![](Aide/6.png)

source :<https://stackoverflow.com/questions/tagged/ggplot2>

### chaine youtube fr 

![](Aide/7.png)

source :<https://www.youtube.com/playlist?list=PL4qokC4YyuUcgnOHMKvSWMuWBb83_Y2D0>

### chaine youtube en 

![](Aide/8.png)

source : <https://www.youtube.com/playlist?list=PLtL57Fdbwb_C6RS0JtBojTNOMVlgpeJkS>

# Conclusion
